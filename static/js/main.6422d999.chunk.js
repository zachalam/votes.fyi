(this["webpackJsonpvotes.fyi"]=this["webpackJsonpvotes.fyi"]||[]).push([[0],{107:function(e,t,a){e.exports=a.p+"static/media/votes.fyi.561ac2a9.png"},254:function(e,t,a){e.exports=a(504)},259:function(e,t,a){},504:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(56),l=a.n(o),s=(a(259),a(244)),c=a(13),i=a.n(c),u=a(77),m=a(29),p=a(30),h=a(31),v=a(45),g=a(519),d=a(153),f=a(226),E=a(228);function b(){return(b=Object(u.a)(i.a.mark((function e(t){var a,n,r,o,l,s,c,u,m,p,h,v,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.connect)(t,"thegraph");case 2:return a=e.sent,e.next=5,a.app("voting");case 5:return n=e.sent,r=[],{},o=new E.Voting(n.address,"https://api.thegraph.com/subgraphs/name/aragon/aragon-voting-mainnet"),e.next=11,o.votes();case 11:l=e.sent,s=Object(d.a)(l),e.prev=13,s.s();case 15:if((c=s.n()).done){e.next=24;break}return u=c.value,e.next=19,u.casts();case 19:m=e.sent,p=Object(d.a)(m);try{for(v=function(){var e=h.value,t=e.voter,a=r.findIndex((function(e){return e.voter===t})),n=t.substring(0,8)+".."+t.substring(36);if(a>-1){var o={voter:e.voter,voterShort:n,supportVotes:(e.supports?1:0)+r[a].supportVotes,totalVotes:1+r[a].totalVotes};r[a]=o}else r.push({voter:e.voter,voterShort:n,supportVotes:e.supports?1:0,totalVotes:1})},p.s();!(h=p.n()).done;)v()}catch(i){p.e(i)}finally{p.f()}case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),s.e(e.t0);case 29:return e.prev=29,s.f(),e.finish(29);case 32:return r.sort((function(e,t){return t.totalVotes-e.totalVotes})),g={allVotes:l,allCasts:r},console.log("bundle is"),console.log(g),e.abrupt("return",g);case 37:case"end":return e.stop()}}),e,null,[[13,26,29,32]])})))).apply(this,arguments)}var y=function(e){return b.apply(this,arguments)},V=a(107),x=a.n(V),w=a(108),O=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={visibile:!0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.setState({visible:!1})}),1012),setInterval((function(){e.setState({visible:!0})}),1024)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.Animated,{animationIn:"pulse",isVisible:this.state.visible,animationInDuration:1e3},r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:x.a,style:{width:"75%"}}))),r.a.createElement("div",{class:"xlarge",style:{paddingTop:"20px",paddingBottom:"20px"}},"Crunching votes..."),r.a.createElement("div",{class:"medium",style:{color:"grey"}},r.a.createElement("b",null,this.props.orgName)))}}]),a}(r.a.Component),j=a(516),k=a(515),C=a(506),N=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.Animated,{animationIn:"bounceInDown",isVisible:!0,animationInDuration:1e3},r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:x.a,style:{width:"75%"}}))),r.a.createElement("div",{class:"xlarge",style:{paddingTop:"20px",paddingBottom:"20px"}},"DAO Leaders"),r.a.createElement("div",{style:{marginBottom:"20px"}},"Provide an"," ",r.a.createElement("a",{href:"https://aragon.org",target:"_blank"},"Aragon DAO")," ","address and we'll generate a leaderboard based on the"," ",r.a.createElement("b",null,"most active voters"),"."),r.a.createElement(j.a,{onSubmit:this.props.submitForm},r.a.createElement(k.a,{size:"huge",placeholder:"governance.aragonproject.eth"})," ",r.a.createElement(C.a,{primary:!0,type:"submit",size:"huge"},"Go")),r.a.createElement("div",null,"Unsure? Try ",r.a.createElement("a",{href:"/#governance.aragonproject.eth"},"governance.aragonproject.eth")))}}]),a}(r.a.Component),F=a(41),D=a(242),S=a.n(D),A=a(58),I=a(517),T=a(80),L=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={confetti:!1,currentVoter:0,voterCount:n.props.allCasts.length},n.nextVoter=n.nextVoter.bind(Object(F.a)(n)),n.lastVoter=n.lastVoter.bind(Object(F.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({confetti:!0})}},{key:"nextVoter",value:function(){var e=this.state.currentVoter+1;e===this.state.voterCount&&(e=0),this.setState({currentVoter:e})}},{key:"lastVoter",value:function(){var e=this.state.currentVoter-1;-1===e&&(e=this.props.allCasts.length-1),console.log("nextvoter is",e),this.setState({currentVoter:e})}},{key:"whenVote",value:function(e,t){console.log("allVotes"),console.log(t.l);var a=(100*(e.totalVotes/t.length)).toFixed(2);return r.a.createElement(r.a.Fragment,null,"This user voted in ",a,"% of the total ",t.length," ","measures.")}},{key:"howVote",value:function(e){var t=e.supportVotes/e.totalVotes,a=(100*t).toFixed(2);return t>.5?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"large",style:{color:"green"}},"Tends to vote ",r.a.createElement("b",null,"in support"),"."),"This user supported ",a,"% of measures."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"large",style:{color:"gray"}},"Tends to vote ",r.a.createElement("b",null,"in opposition"),"."),"This user supported ",a,"% of measures.")}},{key:"render",value:function(){var e=this.props,t=e.allCasts,a=e.allVotes,n=this.state.currentVoter;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"xlarge"},r.a.createElement(A.a,{name:"user circle"})," DAO Leaderboard"),r.a.createElement("a",{href:"https://mainnet.aragon.org/#/".concat(this.props.orgName),target:"_blank"},this.props.orgName),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{basic:"very",celled:!0,collapsing:!0,style:{width:"100%"}},r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Row,{positive:!0},r.a.createElement(I.a.Cell,{style:{width:"60%"}},r.a.createElement(T.a,{ribbon:!0},r.a.createElement("div",{className:"large"},"#",n+1," of ",t.length)),r.a.createElement("div",{className:"large"},t[n].voterShort),"Looking for more info?"," ",r.a.createElement("a",{href:"https://etherscan.io/address/".concat(t[n].voter),target:"_blank"},"view on etherscan.io"))),r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Cell,null,r.a.createElement("div",{className:"large"},"Cast ",r.a.createElement("b",null,t[n].totalVotes," votes"),"."),this.whenVote(t[n],a))),r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Cell,null,this.howVote(t[n]))))),r.a.createElement(S.a,{active:this.state.confetti,config:{colors:["#6D6DAA","#C7E9FF"],elementCount:120,stagger:10,spread:70,angle:50}}),r.a.createElement("br",null),this.state.voterCount>1?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{icon:!0,labelPosition:"left",size:"huge",onClick:this.lastVoter},r.a.createElement(A.a,{name:"left arrow"}),"Last")," ",r.a.createElement(C.a,{icon:!0,labelPosition:"right",size:"huge",onClick:this.nextVoter},"Next",r.a.createElement(A.a,{name:"right arrow"}))):r.a.createElement("b",null,"This organization only has 1 voter."),r.a.createElement("div",{style:{position:"fixed",cursor:"pointer",textSize:"2em",top:"5px",left:"5px"}},r.a.createElement("a",{href:"/"},r.a.createElement(A.a,{className:"home"}))))}}]),a}(r.a.Component),z=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).setOrgName=function(e){n.setState({orgName:e})},n.runVoteLookup=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:a=e.sent,n.setState({votingDetails:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Leaderboard=function(e){console.log("casts is.."),console.log(e);for(var t=[],a=0,n=Object.entries(e);a<n.length;a++){var o=Object(s.a)(n[a],2),l=o[0];o[1];t.push(r.a.createElement("div",null,l))}return t},n.state={votingDetails:{},orgName:""},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.location.hash,a=t.split("#")[1],this.setState({orgName:a}),a&&this.runVoteLookup(a);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.votingDetails,a=e.orgName,n=t.allCasts,o=t.allVotes,l=r.a.createElement(N,{orgName:a});return a&&(l=r.a.createElement(O,{orgName:a})),n&&(l=r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(L,{orgName:a,allVotes:o,allCasts:n})))),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(g.a.Column,{style:{maxWidth:550,padding:"2em"}},l)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[254,1,2]]]);
//# sourceMappingURL=main.6422d999.chunk.js.map