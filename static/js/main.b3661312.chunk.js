(this["webpackJsonpvotes.fyi"]=this["webpackJsonpvotes.fyi"]||[]).push([[0],{213:function(e,t,n){e.exports=n(466)},218:function(e,t,n){},466:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(40),s=n.n(o),l=(n(218),n(6)),c=n.n(l),i=n(83),u=n(204),m=n(23),v=n(24),p=n(25),h=n(35),f=n(474),g=n(64),d=n(195),b=n(197);function E(){return(E=Object(i.a)(c.a.mark((function e(t){var n,a,r,o,s,l,i,u,m,v,p,h,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.connect)(t,"thegraph");case 2:return n=e.sent,e.next=5,n.app("voting");case 5:return a=e.sent,r=[],{},o=new b.Voting(a.address,"https://api.thegraph.com/subgraphs/name/aragon/aragon-voting-mainnet"),e.next=11,o.votes();case 11:s=e.sent,l=Object(g.a)(s),e.prev=13,l.s();case 15:if((i=l.n()).done){e.next=24;break}return u=i.value,e.next=19,u.casts();case 19:m=e.sent,v=Object(g.a)(m);try{for(h=function(){var e=p.value,t=e.voter,n=r.findIndex((function(e){return e.voter===t}));if(n>-1){var a={voter:e.voter,supportVotes:(e.supports?1:0)+r[n].supportVotes,totalVotes:1+r[n].totalVotes};r[n]=a}else r.push({voter:e.voter,supportVotes:e.supports?1:0,totalVotes:1})},v.s();!(p=v.n()).done;)h()}catch(c){v.e(c)}finally{v.f()}case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),l.e(e.t0);case 29:return e.prev=29,l.f(),e.finish(29);case 32:return r.sort((function(e,t){return t.totalVotes-e.totalVotes})),f={allVotes:s,allCasts:r},console.log("bundle is"),console.log(f),e.abrupt("return",f);case 37:case"end":return e.stop()}}),e,null,[[13,26,29,32]])})))).apply(this,arguments)}var y=function(e){return E.apply(this,arguments)},j=n(89),w=n.n(j),O=n(90),x=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={visibile:!0},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.setState({visible:!1})}),1012),setInterval((function(){e.setState({visible:!0})}),1024)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.Animated,{animationIn:"pulse",isVisible:this.state.visible,animationInDuration:1e3},r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:w.a,style:{width:"75%"}}))),r.a.createElement("h1",null,"Crunching DAO votes..."),r.a.createElement("h3",null,r.a.createElement("b",null,this.props.orgName)))}}]),n}(r.a.Component),k=(r.a.Component,n(473)),C=n(472),V=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(v.a)(n,[{key:"render",value:function(){var e,t=this.props.allCasts,n=[],a=Object(g.a)(t);try{for(a.s();!(e=a.n()).done;){var o=e.value,s=o.voter;n.push(r.a.createElement(k.a.Row,null,r.a.createElement(k.a.Cell,null,s.substring(0,6),"..",s.substring(38)),r.a.createElement(k.a.Cell,null,o.totalVotes," votes")))}}catch(l){a.e(l)}finally{a.f()}return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{basic:"very",celled:!0,collapsing:!0,style:{width:"100%"}},r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Row,null,r.a.createElement(k.a.Cell,null,r.a.createElement(C.a,{ribbon:!0},"First")),r.a.createElement(k.a.Cell,null)),n)))}}]),n}(r.a.Component),D=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).Leaderboard=function(e){console.log("casts is.."),console.log(e);for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var o=Object(u.a)(a[n],2),s=o[0];o[1];t.push(r.a.createElement("div",null,s))}return t},a.state={votingDetails:{},orgName:"governance.aragonproject.eth"},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(window.location),setTimeout((function(){window.location="/#looo"}),3e3),e.next=4,y(this.state.orgName);case 4:t=e.sent,this.setState({votingDetails:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.votingDetails,n=e.orgName,a=t.allCasts,o=r.a.createElement(x,{orgName:n});return a&&(o=r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(V,{allCasts:a})))),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(f.a.Column,{style:{maxWidth:500,paddingTop:"1em"}},o)))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,n){e.exports=n.p+"static/media/votes.fyi.561ac2a9.png"}},[[213,1,2]]]);
//# sourceMappingURL=main.b3661312.chunk.js.map